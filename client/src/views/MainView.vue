<template>
  <v-app :theme="theme">
    <v-app-bar>
      <RouterLink :to="{ name: 'home' }" class="link home">
        <!-- <img
          src="https://fontmeme.com/permalink/230222/90dd6a080269539390d20737f37a639d.png"
          alt="calligraphy-fonts"
          border="0"
        /> -->
        <div class="container-logo-svg">
          <svg viewBox="0 -1 300 120" class="css-1j8o68f logo-svg">
            <defs id="SvgjsDefs23285"></defs>
            <g
              id="SvgjsG23286"
              featurekey="symbolFeature-0"
              transform="matrix(0.7838760802149753,0,0,0.7838760802149753,-11,-11.974265123009655)"
              fill="#ff6600"
              data-darkreader-inline-fill=""
              style="--darkreader-inline-fill: #c24e00"
            >
              <g xmlns="http://www.w3.org/2000/svg">
                <path
                  fill="#ff6600"
                  d="M49.992,14c-19.86,0-36,16.14-36,36c0,19.74,15.9,35.76,35.58,36c0.06,0,0.06,0,0.12,0h0.3h35.161   c1.14,0,1.14-1.62,0-1.62h-24.54c14.699-4.5,25.38-18.18,25.38-34.38C85.993,30.14,69.853,14,49.992,14L49.992,14z M49.992,15.62   c19.021,0,34.381,15.36,34.381,34.38c0,19.02-15.36,34.38-34.381,34.38c-19.02,0-34.38-15.36-34.38-34.38   C15.612,30.98,30.972,15.62,49.992,15.62L49.992,15.62z M49.992,19.28c-16.98,0-30.72,13.74-30.72,30.72   c0,16.98,13.74,30.72,30.72,30.72c16.98,0,30.721-13.739,30.721-30.72C80.713,33.02,66.973,19.28,49.992,19.28L49.992,19.28z    M49.992,20.9c16.081,0,29.101,13.02,29.101,29.1s-13.02,29.1-29.101,29.1c-16.08,0-29.1-13.02-29.1-29.1S33.913,20.9,49.992,20.9   L49.992,20.9z M49.992,23.72c-4.98,0-9,4.02-9,9s4.02,9,9,9c4.98,0,9.001-4.02,9.001-9S54.973,23.72,49.992,23.72L49.992,23.72z    M49.992,25.28c4.141,0,7.44,3.3,7.44,7.44c0,4.08-3.3,7.44-7.44,7.44c-4.14,0-7.44-3.36-7.44-7.44   C42.552,28.58,45.853,25.28,49.992,25.28L49.992,25.28z M32.712,41c-4.98,0-9,4.02-9,9c0,4.98,4.02,9,9,9s9-4.02,9-9   C41.712,45.02,37.692,41,32.712,41L32.712,41z M67.272,41c-4.979,0-9,4.02-9,9c0,4.98,4.021,9,9,9c4.98,0,9-4.02,9-9   C76.272,45.02,72.253,41,67.272,41L67.272,41z M32.712,42.56c4.08,0,7.44,3.3,7.44,7.44c0,4.14-3.36,7.44-7.44,7.44   c-4.14,0-7.44-3.301-7.44-7.44C25.272,45.86,28.572,42.56,32.712,42.56L32.712,42.56z M67.272,42.56c4.141,0,7.44,3.3,7.44,7.44   c0,4.14-3.3,7.44-7.44,7.44c-4.08,0-7.439-3.301-7.439-7.44C59.833,45.86,63.192,42.56,67.272,42.56L67.272,42.56z M49.992,58.28   c-4.98,0-9,4.02-9,9c0,4.979,4.02,9,9,9c4.98,0,9.001-4.021,9.001-9C58.993,62.3,54.973,58.28,49.992,58.28L49.992,58.28z    M49.992,59.84c4.141,0,7.44,3.36,7.44,7.44c0,4.14-3.3,7.439-7.44,7.439c-4.14,0-7.44-3.3-7.44-7.439   C42.552,63.2,45.853,59.84,49.992,59.84L49.992,59.84z"
                  data-darkreader-inline-fill=""
                  style="--darkreader-inline-fill: #c24e00"
                ></path>
              </g>
            </g>
            <g
              id="SvgjsG23287"
              featurekey="nameFeature-0"
              transform="matrix(1.8240151053652593,0,0,1.8240151053652593,66.1,-17.83148647549759)"
              fill="#4a4a4a"
              data-darkreader-inline-fill=""
              style="--darkreader-inline-fill: #35393c"
            >
              <path
                d="M25.08 9.8 c1.48 0 2.68 1.2 2.68 2.68 l0 24.76 c0 1 -0.4 1.84 -1.32 2.4 c-1.2 0.68 -2.88 0.4 -3.68 -0.96 l-14.56 -22.64 c-0.68 -1 -1.64 -0.96 -2.08 -0.68 c-0.48 0.24 -0.72 0.72 -0.76 1.24 l0 20.68 c0 1.48 -1.2 2.68 -2.68 2.68 s-2.68 -1.2 -2.68 -2.68 l0 -20.72 c0.04 -2.44 1.32 -4.64 3.4 -5.88 c3.28 -1.88 7.28 -0.72 9.32 2.48 l9.68 15.04 l0 -15.72 c0 -1.48 1.2 -2.68 2.68 -2.68 z M4.36 12.32 c-1.56 0.88 -2.52 2.56 -2.48 4.36 l0 20.6 c0 0.44 0.36 0.84 0.8 0.84 c0.48 0 0.84 -0.4 0.84 -0.84 l0 -20.72 c0 -1.16 0.64 -2.24 1.64 -2.84 c1.72 -0.96 3.68 -0.08 4.6 1.32 l14.6 22.68 c0.24 0.44 0.76 0.56 1.16 0.32 s0.52 -0.72 0.28 -1.12 l-14.64 -22.76 c-1.56 -2.4 -4.56 -3.16 -6.8 -1.84 z M25.08 11.64 c-0.44 0 -0.84 0.4 -0.84 0.84 l0 18.6 l1.68 2.56 l0 -21.16 c0 -0.44 -0.4 -0.84 -0.84 -0.84 z M33.440000000000005 9.8 c1.44 0 2.64 1.2 2.64 2.68 l0 22.2 l13.84 0 c1.44 0 2.64 1.2 2.64 2.68 c0 1.44 -1.2 2.64 -2.64 2.64 l-15.12 0 c-2.24 0 -4.04 -1.8 -4.04 -4.04 l0 -23.48 c0 -1.48 1.2 -2.68 2.68 -2.68 z M33.440000000000005 11.68 c-0.44 0 -0.8 0.36 -0.8 0.8 l0 23.6 c0 1.16 0.88 2.08 2.04 2.08 l0.2 0 c-0.4 -0.64 -0.64 -1.4 -0.64 -2.2 l0 -23.48 c0 -0.44 -0.36 -0.8 -0.8 -0.8 z M49.92 36.56 l-13.76 0 c0.28 0.92 1.12 1.6 2.12 1.6 l11.64 0 c0.44 0 0.8 -0.36 0.8 -0.8 s-0.36 -0.8 -0.8 -0.8 z M57.64 9.8 c1.44 0 2.64 1.2 2.64 2.64 l0 24.88 c0 1.48 -1.2 2.68 -2.64 2.68 c-1.48 0 -2.68 -1.2 -2.68 -2.68 l0 -24.88 c0 -1.44 1.2 -2.64 2.68 -2.64 z M57.64 11.64 c-0.44 0 -0.8 0.36 -0.8 0.8 l0 24.88 c0 0.44 0.36 0.8 0.8 0.8 s0.76 -0.36 0.76 -0.8 l0 -24.88 c0 -0.44 -0.32 -0.8 -0.76 -0.8 z M88.36 9.8 c1.48 0 2.68 1.2 2.68 2.68 l0 24.76 c0 1 -0.4 1.84 -1.32 2.4 c-1.2 0.68 -2.88 0.4 -3.68 -0.96 l-14.56 -22.64 c-0.68 -1 -1.64 -0.96 -2.08 -0.68 c-0.48 0.24 -0.72 0.72 -0.76 1.24 l0 20.68 c0 1.48 -1.2 2.68 -2.68 2.68 s-2.68 -1.2 -2.68 -2.68 l0 -20.72 c0.04 -2.44 1.32 -4.64 3.4 -5.88 c3.28 -1.88 7.28 -0.72 9.32 2.48 l9.68 15.04 l0 -15.72 c0 -1.48 1.2 -2.68 2.68 -2.68 z M67.64 12.32 c-1.56 0.88 -2.52 2.56 -2.48 4.36 l0 20.6 c0 0.44 0.36 0.84 0.8 0.84 c0.48 0 0.84 -0.4 0.84 -0.84 l0 -20.72 c0 -1.16 0.64 -2.24 1.64 -2.84 c1.72 -0.96 3.68 -0.08 4.6 1.32 l14.6 22.68 c0.24 0.44 0.76 0.56 1.16 0.32 s0.52 -0.72 0.28 -1.12 l-14.64 -22.76 c-1.56 -2.4 -4.56 -3.16 -6.8 -1.84 z M88.36 11.64 c-0.44 0 -0.84 0.4 -0.84 0.84 l0 18.6 l1.68 2.56 l0 -21.16 c0 -0.44 -0.4 -0.84 -0.84 -0.84 z M98.08000000000001 9.8 l17.88 0 c1.48 0 2.68 1.2 2.68 2.68 c0 1.44 -1.2 2.64 -2.68 2.64 l-16.6 0 l0 7.08 l6.92 0 c1.48 0 2.68 1.2 2.68 2.64 c0 1.48 -1.2 2.68 -2.68 2.68 l-6.92 0 l0 7.16 l16.6 0 c1.48 0 2.68 1.2 2.68 2.68 c0 1.44 -1.2 2.64 -2.68 2.64 l-17.88 0 c-2.24 0 -4.04 -1.8 -4.04 -4.04 l0 -22.12 c0 -2.24 1.8 -4.04 4.04 -4.04 z M115.96000000000001 11.68 l-17.88 0 c-1.2 0 -2.16 0.96 -2.16 2.16 l0 9 c0.44 -0.32 1 -0.52 1.56 -0.6 l0 -8.04 c0 -0.52 0.44 -0.92 0.92 -0.92 l17.56 -0.04 c0.44 0 0.8 -0.32 0.8 -0.76 s-0.36 -0.8 -0.8 -0.8 z M106.28 24.04 l-8.2 0 c-1.2 0 -2.16 1 -2.16 2.2 l0 9.72 c0 1.2 0.96 2.2 2.16 2.2 l17.88 0 c0.44 0 0.8 -0.36 0.8 -0.8 s-0.36 -0.8 -0.8 -0.8 l-17.56 0 c-0.48 0 -0.92 -0.44 -0.92 -0.96 l0 -9 c0 -0.52 0.44 -0.96 0.92 -0.96 l7.88 0 c0.44 0 0.8 -0.36 0.8 -0.8 s-0.36 -0.8 -0.8 -0.8 z"
              ></path>
            </g>
            <g
              id="SvgjsG23288"
              featurekey="nameFeature-1"
              transform="matrix(1.7163484752497165,0,0,1.7163484752497165,0,49.82748249057343)"
              fill="#4a4a4a"
              data-darkreader-inline-fill=""
              style="--darkreader-inline-fill: #35393c"
            >
              <path
                d="M15.88 8.84 c4.32 0 8.36 1.72 11.36 4.72 c1.04 1.04 1 2.68 0 3.76 c-1.08 1.08 -2.72 1.08 -3.8 0 c-2 -2.04 -4.72 -3.16 -7.56 -3.16 c-5.8 0 -10.76 4.72 -10.76 10.76 c0 5.92 4.8 10.72 10.76 10.72 c2.84 0 5.56 -1.12 7.56 -3.16 c1.12 -1 2.68 -1 3.8 0 c1.04 1.04 1.04 2.76 0 3.8 c-3.12 3 -6.96 4.68 -11.36 4.68 c-9.48 0 -16.08 -7.68 -16.08 -16.04 c0 -8.04 6.44 -16.08 16.08 -16.08 z M15.88 10.719999999999999 c-7.88 0 -14.2 6.32 -14.2 14.2 c0 7.84 6.32 14.2 14.2 14.2 c3.76 0 7.36 -1.48 10.04 -4.16 c0.28 -0.32 0.48 -0.72 0.04 -1.16 c-0.36 -0.36 -0.84 -0.36 -1.2 0 c-2.36 2.4 -5.52 3.68 -8.88 3.68 c-6.96 0 -12.6 -5.6 -12.6 -12.56 s5.64 -12.6 12.6 -12.6 c3.36 0 6.52 1.32 8.88 3.68 c0.36 0.36 0.8 0.44 1.2 0.04 c0.44 -0.44 0.2 -0.92 -0.04 -1.16 c-2.68 -2.72 -6.28 -4.16 -10.04 -4.16 z M33.72 9.8 c1.44 0 2.64 1.2 2.64 2.64 l0 24.88 c0 1.48 -1.2 2.68 -2.64 2.68 c-1.48 0 -2.68 -1.2 -2.68 -2.68 l0 -24.88 c0 -1.44 1.2 -2.64 2.68 -2.64 z M33.72 11.64 c-0.44 0 -0.8 0.36 -0.8 0.8 l0 24.88 c0 0.44 0.36 0.8 0.8 0.8 s0.76 -0.36 0.76 -0.8 l0 -24.88 c0 -0.44 -0.32 -0.8 -0.76 -0.8 z M64.44 9.8 c1.48 0 2.68 1.2 2.68 2.68 l0 24.76 c0 1 -0.4 1.84 -1.32 2.4 c-1.2 0.68 -2.88 0.4 -3.68 -0.96 l-14.56 -22.64 c-0.68 -1 -1.64 -0.96 -2.08 -0.68 c-0.48 0.24 -0.72 0.72 -0.76 1.24 l0 20.68 c0 1.48 -1.2 2.68 -2.68 2.68 s-2.68 -1.2 -2.68 -2.68 l0 -20.72 c0.04 -2.44 1.32 -4.64 3.4 -5.88 c3.28 -1.88 7.28 -0.72 9.32 2.48 l9.68 15.04 l0 -15.72 c0 -1.48 1.2 -2.68 2.68 -2.68 z M43.72 12.32 c-1.56 0.88 -2.52 2.56 -2.48 4.36 l0 20.6 c0 0.44 0.36 0.84 0.8 0.84 c0.48 0 0.84 -0.4 0.84 -0.84 l0 -20.72 c0 -1.16 0.64 -2.24 1.64 -2.84 c1.72 -0.96 3.68 -0.08 4.6 1.32 l14.6 22.68 c0.24 0.44 0.76 0.56 1.16 0.32 s0.52 -0.72 0.28 -1.12 l-14.64 -22.76 c-1.56 -2.4 -4.56 -3.16 -6.8 -1.84 z M64.44 11.64 c-0.44 0 -0.84 0.4 -0.84 0.84 l0 18.6 l1.68 2.56 l0 -21.16 c0 -0.44 -0.4 -0.84 -0.84 -0.84 z M74.16000000000001 9.8 l17.88 0 c1.48 0 2.68 1.2 2.68 2.68 c0 1.44 -1.2 2.64 -2.68 2.64 l-16.6 0 l0 7.08 l6.92 0 c1.48 0 2.68 1.2 2.68 2.64 c0 1.48 -1.2 2.68 -2.68 2.68 l-6.92 0 l0 7.16 l16.6 0 c1.48 0 2.68 1.2 2.68 2.68 c0 1.44 -1.2 2.64 -2.68 2.64 l-17.88 0 c-2.24 0 -4.04 -1.8 -4.04 -4.04 l0 -22.12 c0 -2.24 1.8 -4.04 4.04 -4.04 z M92.04 11.68 l-17.88 0 c-1.2 0 -2.16 0.96 -2.16 2.16 l0 9 c0.44 -0.32 1 -0.52 1.56 -0.6 l0 -8.04 c0 -0.52 0.44 -0.92 0.92 -0.92 l17.56 -0.04 c0.44 0 0.8 -0.32 0.8 -0.76 s-0.36 -0.8 -0.8 -0.8 z M82.36 24.04 l-8.2 0 c-1.2 0 -2.16 1 -2.16 2.2 l0 9.72 c0 1.2 0.96 2.2 2.16 2.2 l17.88 0 c0.44 0 0.8 -0.36 0.8 -0.8 s-0.36 -0.8 -0.8 -0.8 l-17.56 0 c-0.48 0 -0.92 -0.44 -0.92 -0.96 l0 -9 c0 -0.52 0.44 -0.96 0.92 -0.96 l7.88 0 c0.44 0 0.8 -0.36 0.8 -0.8 s-0.36 -0.8 -0.8 -0.8 z M132.64 10.68 c2.16 1.24 3.44 3.56 3.4 6.04 l0 20.56 c0 1.48 -1.2 2.68 -2.68 2.68 s-2.68 -1.2 -2.68 -2.68 l0 -20.68 c0 -0.52 -0.28 -1 -0.72 -1.24 c-0.88 -0.52 -1.76 0.16 -2.08 0.68 l-7.8 12.12 l5.04 7.8 c0.84 1.36 0.2 3 -0.96 3.68 c-1.2 0.68 -2.88 0.4 -3.68 -0.96 l-14.56 -22.64 c-0.68 -1 -1.64 -0.96 -2.08 -0.68 c-0.48 0.24 -0.72 0.72 -0.76 1.24 l0 20.68 c0 1.48 -1.2 2.68 -2.68 2.68 s-2.68 -1.2 -2.68 -2.68 l0 -20.72 c0 -2.44 1.32 -4.64 3.4 -5.88 c3.28 -1.88 7.28 -0.72 9.32 2.48 l6.44 10 l6.48 -10 c2.04 -3.2 6 -4.36 9.28 -2.48 z M131.72 12.32 c-2.44 -1.44 -5.4 -0.36 -6.8 1.84 l-6.92 10.72 l0.96 1.56 l7.36 -11.4 c1.04 -1.64 3 -2.2 4.56 -1.32 c1 0.6 1.64 1.68 1.64 2.88 l0 20.68 c0 0.44 0.4 0.84 0.84 0.84 c0.48 0 0.84 -0.4 0.84 -0.84 l0 -20.72 c-0.04 -1.76 -0.96 -3.36 -2.48 -4.24 z M102.08 12.32 c-1.56 0.88 -2.52 2.56 -2.48 4.36 l0 20.6 c0 0.44 0.36 0.84 0.8 0.84 c0.48 0 0.84 -0.4 0.84 -0.84 l0 -20.72 c0 -1.16 0.64 -2.24 1.64 -2.84 c1.72 -0.96 3.68 -0.08 4.6 1.32 l14.6 22.68 c0.28 0.44 0.76 0.64 1.16 0.4 c0.44 -0.28 0.52 -0.8 0.28 -1.2 l-14.64 -22.76 c-1.56 -2.4 -4.56 -3.16 -6.8 -1.84 z M154.92 9.8 c2.88 0 5.28 1.76 6.4 4.44 l9.24 22 c0.68 1.64 0.04 2.92 -1.48 3.56 c-1.24 0.52 -2.92 0 -3.52 -1.64 l-2.72 -6.48 l-15.84 0 l-2.72 6.56 c-0.52 1.24 -2.04 2.12 -3.48 1.56 s-2.12 -2.16 -1.6 -3.48 l9.28 -22.08 c1.12 -2.68 3.56 -4.44 6.44 -4.44 z M154.92 11.64 c-2.04 0 -3.84 1.28 -4.72 3.32 l-9.24 22.04 c-0.2 0.44 0.04 0.92 0.48 1.08 c0.4 0.16 0.84 0.04 1.08 -0.52 l9.28 -22.08 c0.52 -1.24 1.8 -2.08 3.12 -2.08 c1.36 0 2.6 0.8 3.12 2.08 l4.56 10.84 l1.12 0 c0.24 0 0.48 0 0.68 0.04 l-4.8 -11.4 c-0.8 -2.04 -2.6 -3.32 -4.68 -3.32 z M154.92 15.239999999999998 c-0.6 0 -1.16 0.36 -1.4 0.96 l-4.24 10.12 l11.32 0 l-4.28 -10.12 c-0.24 -0.6 -0.8 -0.96 -1.4 -0.96 z M148.48 28.16 l-0.68 1.68 l15.68 0 c0.36 0 0.72 0.2 0.84 0.56 l3 7.12 c0.2 0.52 0.64 0.72 1.08 0.56 s0.6 -0.6 0.44 -1.08 l-3.12 -7.52 c-0.4 -0.8 -1.16 -1.32 -2 -1.32 l-15.24 0 z"
              ></path>
            </g>
          </svg>
        </div>
      </RouterLink>
      <v-spacer></v-spacer>
      <SearchField></SearchField>
      <RouterLink :to="{ name: 'filters' }" class="link filters">
        <v-icon>mdi-filter</v-icon>
      </RouterLink>
      <v-spacer></v-spacer>
      <v-btn icon @click="onClick">
        <v-icon>{{
          theme === "light" ? "mdi-weather-sunny" : "mdi-weather-night"
        }}</v-icon>
      </v-btn>
      <ProfileBar></ProfileBar>
    </v-app-bar>
    <v-main class="main">
      <router-view></router-view>
    </v-main>
    <ScrollToTop />
  </v-app>
</template>

<script lang="ts" setup>
import { ref } from "vue";
import SearchField from "@/components/SearchField.vue";
import ProfileBar from "@/components/ProfileBar.vue";
import { useMoviesStore } from "@/stores/moviesStore";
import { useUserDataStore } from "@/stores/userDataStore";
import ScrollToTop from "@/components/ScrollToTop.vue";
import { useAuthStore } from "@/stores/authStore";

const moviesStore = useMoviesStore();
const userDataStore = useUserDataStore();
const authStore = useAuthStore();

const theme = ref("light");
if (authStore.user && authStore.token) {
  userDataStore.getWatchedHistory(authStore.user.id, authStore.token);
  userDataStore.getWatchedLater(authStore.user.id, authStore.token);
}
function onClick() {
  theme.value = theme.value === "light" ? "dark" : "light";
}
moviesStore.getCountriesAndGenres();
</script>

<style>
.cup {
  cursor: pointer;
}

.link {
  text-decoration: none;
  color: var(--color-text);
}

.tac {
  text-align: center;
}

.red {
  color: red;
}

.gray {
  color: #777;
}

.green {
  color: #3bb33b;
}

.main {
  background-color: rgb(var(--v-theme-on-surface-variant));
}

.filters:hover {
  color: #f50;
  transition: all 0.3s;
  transform: scale(1.25);
}

.home {
  margin: 3px 10px 3px 100px;
  height: 58px;
}
.container-logo-svg {
  height: 100%;
}
.logo-svg {
  height: 100%;
}
</style>
